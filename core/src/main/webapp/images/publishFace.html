<html>
<head>
<style>
/* 定义表情框样式 */
#face {
	table-cellspcing: 1px;
	display: none;
	position: absolute;
	top: 30px;
	left: 100%;
	border: 1px solid #aaa;
	background: #fff;
}
/* 定义编辑框样式 */
#main {
	width: 370px;
	height: 150px;
	border: 1px solid #ccc;
	position: absolute;
}
/* 定义编辑框中的工具条样式 */
#main #toolbar {
	width: 100%;
	height: 30px;
	background: url(images/bg.gif) repeat-x;
}
/* 定义工具条中的链接样式 */
#toolbar a {
	width: 24px;
	height: 24px;
	line-height: 24px;
	text-align: center;
	text-decoration: none;
	color: #000;
	font-weight: bold;
	font-size: 15px;
	float: left;
}
/* 定义工具条中的链接伪样式 */
#toolbar a:hover {
	border-right: 1px solid #aaa;
	border-bottom: 1px solid #aaa;
}
</style>
</head>
<body>
	<div id='main'>
		<div id='toolbar'>
			<a href='javascript:void(0)' onclick='onEffect("Bold")'>B</a> <a
				href='javascript:void(0)' style='font-style: italic'
				onclick='onEffect("Italic")'>I</a> <a href='javascript:void(0)'
				style='text-decoration: underline' onclick='onEffect("Underline")'>U</a>
			<img width=24 height=24 src='http://tb2.bdstatic.com/tb/editor/images/face/i_f02.png?t=20140803'
				style='float: right; cursor: pointer;' onclick='showFace(this)' />
		</div>
		<iframe allowTransparency='true' scrolling='auto' width='100%'
			height='122' src="" id='editor' frameBorder='0'> </iframe>
		<table id="face">
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f01.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f02.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f03.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f04.png?t=20140803"
					onclick="insertFace(this)" /></td>
			</tr>
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f05.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f06.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f07.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f08.png?t=20140803"
					onclick="insertFace(this)" /></td>
			</tr>
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f09.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f10.png?t=20140803"
					onclick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f11.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f12.png?t=20140803"
					onClick="insertFace(this)" /></td>
			</tr>
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f13.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f14.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f15.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f16.png?t=20140803"
					onClick="insertFace(this)" /></td>
			</tr>
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f17.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f18.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f19.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f20.png?t=20140803"
					onClick="insertFace(this)" /></td>
			</tr>
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f21.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f22.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f23.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f24.png?t=20140803"
					onClick="insertFace(this)" /></td>
			</tr>
			<tr>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f25.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f26.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f27.png?t=20140803"
					onClick="insertFace(this)" /></td>
				<td><img
					src="http://tb2.bdstatic.com/tb/editor/images/face/i_f28.png?t=20140803"
					onClick="insertFace(this)" /></td>
			</tr>
		</table>
	</div>


</body>
</html>
<script type="text/javascript">
	//定义编辑窗口引用
	var editPane = null;

	//打开表情窗口
	function showFace(img) {
		var face = document.getElementById("face");
		face.style.display = "block";
		face.style.left = img.offsetLeft + img.offsetWidth - face.offsetWidth
				+ 'px';
		face.onclick = function() {
			face.style.display = "none";
		};
		editPane.document.onclick = function() {
			face.style.display = "none";
		};
	}

	//插入图片
	function insertFace(img) {
		var image = "<img src='" + img.src + "' />";
		editPane.focus()
		editPane.document.execCommand('insertImage', false, img.src);
	}

	//初始化编辑窗口
	(function() {
		editPane = document.getElementById("editor").contentWindow;
		editPane.document.designMode = 'on';
		editPane.document.contentEditable = true;
		editPane.document.open();
		editPane.document.close();
	})();

	//改变效果
	function onEffect(effect) {
		editPane.document.execCommand(effect, false, null);
	}
</script>
