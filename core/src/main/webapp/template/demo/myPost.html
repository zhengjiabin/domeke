<!DOCTYPE html>
<html>
<head>
<title>我的帖子</title>
<base href="${core}/" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- Bootstrap -->
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet"
	media="screen">
<link href="bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"
	media="screen">
<link href="assets/styles.css" rel="stylesheet" media="screen">
<script src="vendors/modernizr-2.6.2-respond-1.1.0.min.js"></script>

<script type="text/javascript" language="text/javascript">
	function goToPageSize(pageSize) {
		location.href = "./post/find?pageSize=" + pageSize
				+ "&pageNumber=1";
	};

	function pageSize(pageSize) {
		var obj = document.getElementById('pageSize');
		for (var i = 0; i < obj.length; i++) {
			if (pageSize == obj.options[i].value) {
				obj.options[i].selected = true;
			} else {
				obj.options[i].selected = false;
			}

		}
	}
</script>

</head>

<body onload="pageSize(${page.pageSize!})">
	<form action="post/find" id="post_find" class="form-horizontal"
		method="post">
		<div class="control-group">
			<h1>
				<a href="./post/skipCreate">发表帖子</a>
			</h1>
			<hr>
			每页<select name="pageSize" id="pageSize"
				onchange="goToPageSize(this.value)">
				<option value="10" selected="true">10</option>
				<option value="20">20</option>
				<option value="30">30</option>
				<option value="80">80</option>
				<option value="100">100</option>
			</select>条&nbsp;共${page.totalRow!}条&nbsp;第${page.pageNumber!}
			/${page.totalPage!}页 <a href="./post/find?pageNumber=1">首页</a> <a
				href="./post/find?pageNumber=${page.pageNumber!-1<1?1:page.pageNumber!-1}">上页</a>
			<a
				href="./post/find?pageNumber=${page.pageNumber!+1>page.totalPage!?page.totalPage!:page.pageNumber!+1}">下页</a>
			<a href="./post/find?pageNumber=${page.totalPage!}">末页</a>
			<table>
				<thead>
					<tr>
						<td style="width: 250px">标题</td>
						<td style="width: 250px">发帖时间</td>
						<td style="width: 250px">帖子内容</td>
						<td style="width: 250px">评分次数</td>
						<td style="width: 250px">帖子状态</td>
						<td style="width: 250px">操作</td>
					</tr>
				</thead>
				<tbody>
					<% for (post in page.list){ %>
					<tr>
						<td><a href="./post/findById?postId=${post.postid}">${post.subject!}</a></td>
						<td>${post.dateline!}</td>
						<td>${post.message!}</td>
						<td>${post.ratetimes!}</td>
						<td>${post.status!}</td>
						<td><a href="./post/findById?postId=${post.postid!}">修改</a> <a
							href="./post/deleteById?postId=${post.postid!}"
							onclick="return confirm('确定删除？')">删除</a></td>
					</tr>
					<% } %>
				</tbody>
			</table>
		</div>
	</form>
</body>

</html>